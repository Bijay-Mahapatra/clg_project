{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>COVID Detection Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* Base Styles */
        :root {
            --primary-color: #007bff;
            --secondary-color: #00bcd4;
            --accent-color: #ff6b6b;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --info-color: #03a9f4;
            --dark-color: #333;
            --light-color: #f8f9fa;
            --white: #ffffff;
            --text-dark: #212529;
            --text-light: #6c757d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            overflow-x: hidden;
            background-color: var(--light-color);
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        
        p {
            margin-bottom: 1rem;
        }
        
        a {
            text-decoration: none;
            color: inherit;
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .section {
            padding: 80px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
        }
        
        .section-title:after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            margin: 20px auto 0;
            border-radius: 2px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            box-shadow: var(--shadow);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-accent {
            background: var(--accent-color);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--white);
        }
        
        /* Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            z-index: -1;
        }
        
        .slideshow-container {
            display: flex;
            width: 300%;
            height: 100%;
            transition: transform 1s ease-in-out;
        }
        
        .slide {
            width: 33.33%;
            height: 100vh;
            background-size: cover;
            background-position: center;
            background-color: var(--dark-color);
            position: relative;
        }
        
        .slide:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .prev, .next {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: var(--white);
            border: none;
            padding: 15px;
            cursor: pointer;
            font-size: 24px;
            z-index: 100;
            border-radius: 50%;
            transition: var(--transition);
            backdrop-filter: blur(5px);
        }
        
        .next { right: 20px; }
        .prev { left: 20px; }
        
        .prev:hover, .next:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        
        @media (max-width: 768px) {
            .prev, .next { display: none; }
        }
        
        /* Navigation */
        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            z-index: 1000;
            padding: 15px 0;
            transition: var(--transition);
        }
        
        .navbar.scrolled {
            padding: 10px 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .navbar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            color: var(--white);
            font-size: 28px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            font-size: 24px;
        }
        
        .nav-links {
            display: flex;
            align-items: center;
            gap: 25px;
        }
        
        .nav-item a {
            color: var(--white);
            padding: 8px 15px;
            display: block;
            transition: var(--transition);
            font-size: 16px;
            font-weight: 500;
            border-radius: 5px;
        }
        
        .nav-item a:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .user-profile {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .profile-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .profile-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid var(--white);
            transition: var(--transition);
        }
        
        .profile-name {
            color: var(--white);
            font-size: 12px;
            margin-top: 5px;
            font-weight: 500;
            max-width: 80px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .profile-img:hover {
            transform: scale(1.1);
        }
        
        .profile-menu {
            display: none;
            position: absolute;
            right: 0;
            top: 70px;
            background: var(--white);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            width: 200px;
            z-index: 1000;
            overflow: hidden;
        }
        
        .profile-item {
            padding: 12px 20px;
            color: var(--text-dark);
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .profile-item:last-child {
            border-bottom: none;
        }
        
        .profile-item:hover {
            background: rgba(0, 0, 0, 0.05);
            color: var(--primary-color);
        }
        
        .profile-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        
        .auth-btn {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
        }
        
        .auth-btn.signin {
            background: var(--white);
            color: var(--primary-color);
        }
        
        .auth-btn.signup {
            background: var(--accent-color);
            color: var(--white);
        }
        
        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .hamburger {
            display: none;
            cursor: pointer;
            padding: 10px;
            color: var(--white);
            font-size: 24px;
        }
        
        @media (max-width: 992px) {
            .nav-links {
                gap: 15px;
            }
        }
        
        @media (max-width: 768px) {
            .hamburger { display: block; }
            .nav-links {
                display: none;
                position: absolute;
                top: 70px;
                right: 20px;
                background: var(--white);
                flex-direction: column;
                gap: 0;
                padding: 0;
                border-radius: 8px;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
                width: 250px;
                z-index: 1000;
            }
            
            .nav-links.active { display: flex; }
            
            .nav-item a {
                color: var(--text-dark);
                padding: 15px 20px;
                border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            }
            
            .nav-item:last-child a {
                border-bottom: none;
            }
            
            .user-profile {
                padding: 15px 20px;
                border-top: 1px solid rgba(0, 0, 0, 0.05);
            }
            
            .profile-img {
                border-color: var(--primary-color);
            }
            
            .auth-buttons {
                flex-direction: column;
                padding: 15px 20px;
                gap: 10px;
            }
            
            .auth-btn {
                width: 100%;
                text-align: center;
            }
        }
        
        /* Hero Section */
        .hero-section {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--white);
            text-align: center;
            padding: 0 20px;
            position: relative;
        }
        
        .hero-content {
            max-width: 800px;
            position: relative;
            z-index: 1;
        }
        
        .hero-section h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .hero-section p {
            font-size: 1.25rem;
            margin-bottom: 2.5rem;
            opacity: 0.9;
        }
        
        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .hero-section h1 {
                font-size: 2.5rem;
            }
            
            .hero-section p {
                font-size: 1.1rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
        
        /* Features Section */
        .features-section {
            background: var(--white);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }
        
        .feature-card {
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            text-align: center;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        .feature-icon {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            transition: var(--transition);
        }
        
        .feature-card:nth-child(1) .feature-icon { color: var(--success-color); }
        .feature-card:nth-child(2) .feature-icon { color: var(--warning-color); }
        .feature-card:nth-child(3) .feature-icon { color: var(--info-color); }
        .feature-card:nth-child(4) .feature-icon { color: var(--accent-color); }
        
        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .feature-card p {
            color: var(--text-light);
        }
        
        /* Detection Tool Section */
        .detection-tool {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            position: relative;
            overflow: hidden;
        }
        
        .detection-tool:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('{% static "images/pattern.png" %}') repeat;
            opacity: 0.05;
            pointer-events: none;
        }
        
        .step-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .step {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            width: 280px;
            text-align: center;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .step:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .step-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: var(--white);
        }
        
        .step h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .step p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
        }
        
        /* Prediction Section */
        .prediction-section {
            background: var(--light-color);
        }
        
        .prediction-intro {
            max-width: 800px;
            margin: 0 auto 50px;
            text-align: center;
        }
        
        .prediction-intro p {
            color: var(--text-light);
        }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 25px;
        }
        
        .image-container {
            position: relative;
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
        }
        
        .image-container img {
            width: 100%;
            height: 180px;
            border-radius: 10px;
            transition: var(--transition);
            object-fit: cover;
            box-shadow: var(--shadow);
            border: 3px solid transparent;
        }
        
        .image-container:hover img {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .image-container.selected img {
            border-color: var(--success-color);
        }
        
        .checkmark {
            position: absolute;
            top: 10px;
            left: 10px;
            color: var(--success-color);
            font-size: 24px;
            background: var(--white);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            display: none;
        }
        
        .image-container.selected .checkmark { 
            display: flex;
            animation: bounce 0.5s;
        }
        
        .image-container h4 {
            margin-top: 15px;
            font-size: 16px;
            color: var(--text-dark);
            font-weight: 600;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .prediction-actions {
            margin-top: 50px;
            text-align: center;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            overflow-y: auto;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: var(--white);
            margin: 5% auto;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            cursor: pointer;
            font-size: 24px;
            color: var(--text-light);
            transition: var(--transition);
        }
        
        .close:hover {
            color: var(--accent-color);
            transform: rotate(90deg);
        }
        
        .modal-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
        }
        
        .patient-form {
            display: grid;
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        .file-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }
        
        .file-upload-btn {
            width: 100%;
            padding: 12px;
            background: var(--light-color);
            color: var(--text-dark);
            border: 1px dashed #ccc;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .file-upload-btn:hover {
            background: #f1f1f1;
        }
        
        .file-upload input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .form-actions {
            margin-top: 20px;
            text-align: center;
        }
        
        /* Auth Modal Styles */
        .auth-form {
            display: grid;
            gap: 15px;
        }
        
        .auth-form .form-group {
            margin-bottom: 10px;
        }
        
        .auth-form-footer {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
        }
        
        .auth-form-footer a {
            color: var(--primary-color);
            font-weight: 500;
        }
        
        /* Report Section */
        .report-section {
            background: var(--white);
            padding: 60px 0;
            display: none;
        }
        
        .report-container {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            margin-top: 40px;
        }
        
        .report-chart {
            flex: 1;
            min-width: 300px;
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        
        .report-details {
            flex: 1;
            min-width: 300px;
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        
        .patient-info {
            margin-bottom: 30px;
        }
        
        .patient-info h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .info-item strong {
            display: block;
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .doctor-note {
            margin-top: 30px;
        }
        
        .doctor-note h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .doctor-note p {
            line-height: 1.8;
            color: var(--text-dark);
        }
        
        .report-actions {
            margin-top: 40px;
            text-align: center;
        }
        
        /* Dashboard Styles */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            margin-top: 40px;
        }
        
        .health-timeline {
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        
        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: var(--white);
            border: none;
            border-radius: 10px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
            text-align: left;
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 350px;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }
        
        .chatbot-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: #f9f9f9;
        }
        
        .chat-message {
            margin-bottom: 15px;
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            clear: both;
        }
        
        .bot-message {
            background: var(--white);
            border-bottom-left-radius: 5px;
            float: left;
        }
        
        .user-message {
            background: var(--primary-color);
            color: var(--white);
            border-bottom-right-radius: 5px;
            float: right;
        }
        
        .chat-option {
            display: block;
            margin: 10px 0;
            padding: 8px 15px;
            background: #e9f5ff;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            clear: both;
            float: left;
            max-width: 90%;
        }
        
        .chat-option:hover {
            background: #d0e8ff;
            transform: translateX(5px);
        }
        
        .chat-clear {
            display: block;
            margin: 10px 0;
            padding: 8px 15px;
            background: #ffe9e9;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            clear: both;
            float: left;
            max-width: 90%;
            text-align: center;
            font-weight: bold;
        }
        
        .chat-clear:hover {
            background: #ffd0d0;
        }
        
        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
        }
        
        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 30px;
            outline: none;
        }
        
        .chat-input button {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
        }
        
        .chatbot-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1001;
        }
        
        /* Gamification Styles */
        .gamification-panel {
            display: flex;
            align-items: center;
            gap: 20px;
            background: var(--white);
            padding: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-top: 30px;
        }
        
        .streak-counter {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 107, 107, 0.1);
            padding: 8px 15px;
            border-radius: 30px;
            color: var(--accent-color);
            font-weight: 600;
        }
        
        .badges {
            display: flex;
            gap: 10px;
        }
        
        .badge {
            width: 40px;
            height: 40px;
            background: var(--light-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--warning-color);
            position: relative;
        }
        
        .badge:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark-color);
            color: var(--white);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
        }
        
        /* 3D Viewer Styles */
        .viewer-container {
            width: 100%;
            height: 400px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
            position: relative;
        }
        
        .viewer-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .viewer-controls button {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
        }
        
        /* Accessibility Controls */
        .accessibility-panel {
            position: fixed;
            top: 100px;
            right: -200px;
            width: 200px;
            background: var(--white);
            box-shadow: var(--shadow);
            border-radius: 10px 0 0 10px;
            padding: 15px;
            transition: var(--transition);
            z-index: 1000;
        }
        
        .accessibility-panel.open {
            right: 0;
        }
        
        .accessibility-toggle {
            position: absolute;
            left: -40px;
            top: 20px;
            background: var(--primary-color);
            color: var(--white);
            width: 40px;
            height: 40px;
            border-radius: 10px 0 0 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .accessibility-option {
            margin-bottom: 10px;
        }
        
        .accessibility-option label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        /* Community Feed Styles */
        .community-feed {
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-top: 40px;
        }
        
        .post {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .post:last-child {
            border-bottom: none;
        }
        
        .meta {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 5px;
        }
        
        /* Footer */
        .footer {
            background: var(--dark-color);
            color: var(--white);
            padding: 60px 0 30px;
            text-align: center;
        }
        
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-column {
            flex: 1;
            min-width: 200px;
            text-align: left;
        }
        
        .footer-column h3 {
            color: var(--white);
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column li {
            margin-bottom: 10px;
        }
        
        .footer-column a {
            color: rgba(255, 255, 255, 0.7);
            transition: var(--transition);
        }
        
        .footer-column a:hover {
            color: var(--white);
            padding-left: 5px;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--white);
            transition: var(--transition);
        }
        
        .social-links a:hover {
            background: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .copyright {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }
        
        /* Accessibility Modes */
        .high-contrast {
            --primary-color: #000;
            --secondary-color: #333;
            --accent-color: #f00;
            --text-dark: #000;
            --text-light: #333;
            --light-color: #fff;
            --white: #fff;
        }
        
        .text-large {
            font-size: 1.25rem;
            line-height: 1.8;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .section {
                padding: 60px 0;
            }
            
            .modal-content {
                padding: 30px 20px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .report-container {
                flex-direction: column;
            }
            
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .chatbot-container {
                width: 90%;
                right: 5%;
            }
        }
    </style>
</head>
<body>
    <!-- Slideshow -->
    <div class="slideshow">
        <button class="prev" onclick="prevSlide()">❮</button>
        <div class="slideshow-container" id="slideshowContainer">
            <div class="slide" style="background-image: url('{% static 'images/covid3.png' %}')"></div>
            <div class="slide" style="background-image: url('{% static 'images/covid1.jpeg' %}')"></div>
            <div class="slide" style="background-image: url('{% static 'images/covid2.jpg' %}')"></div>
        </div>
        <button class="next" onclick="nextSlide()">❯</button>
    </div>
    
    <!-- Navigation Bar -->
    <div class="navbar" id="navbar">
        <div class="container">
            <div class="navbar-content">
                <div class="logo">
                    <i class="fas fa-shield-virus"></i>
                    <span>COVID Detection</span>
                </div>
                <div class="hamburger" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars"></i>
                </div>
                <div class="nav-links" id="navLinks">
                    <div class="nav-item">
                        <a href="#">Home</a>
                    </div>
                    <div class="nav-item">
                        <a href="#features">Features</a>
                    </div>
                    <div class="nav-item">
                        <a href="#prediction">Predictions</a>
                    </div>
                    <div class="nav-item">
                        <a href="#how-it-works">How It Works</a>
                    </div>
                    {% if user.is_authenticated %}
                    <div class="user-profile">
                        <div class="profile-container" onclick="toggleProfileMenu()">
                            <img src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'images/user.png' %}{% endif %}" 
                                 alt="User" class="profile-img">
                            <div class="profile-name">{{ user.first_name }}</div>
                        </div>
                        <div class="profile-menu" id="profileMenu">
                            <div class="profile-item" onclick="showDashboard()">
                                <i class="fas fa-tachometer-alt"></i><a href="{% url 'dash' %}"> Dashboard</a>
                            </div>
                            <div class="profile-item">
                                <i class="fas fa-user-circle"></i><a href="{% url 'acc' %}"> My Account</a>
                            </div>
                            <div class="profile-item">
                                <i class="fas fa-history"></i><a href="{% url 'medical' %}"> Medical History</a>
                            </div>
                            <div class="profile-item" onclick="handleLogout()">
                                <i class="fas fa-sign-out-alt"></i><a href="{% url 'log' %}"> Logout</a>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="auth-buttons">
                        <button class="auth-btn signin" onclick="openModal('signinModal')">Sign In</button>
                        <button class="auth-btn signup" onclick="openModal('signupModal')">Sign Up</button>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1>Early Detection Saves Lives</h1>
            <p>COVID Predictor powered by advanced Machine Learning algorithms for accurate and rapid diagnosis.</p>
            <div class="hero-buttons">
                <button class="btn btn-accent" onclick="checkAuthAndOpenModal('uploadModal')">
                    <i class="fas fa-upload"></i> Get Predictions
                </button>
                <button class="btn btn-outline" onclick="document.querySelector('#how-it-works').scrollIntoView({ behavior: 'smooth' })">
                    <i class="fas fa-info-circle"></i> Learn More
                </button>
            </div>
        </div>
    </section>
    
    <!-- Features Section -->
    <section class="features-section section" id="features">
        <div class="container">
            <div class="section-title">
                <h2>Why Choose Our COVID Predictor?</h2>
                <p>Advanced technology for accurate and timely COVID-19 detection</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-diagnoses feature-icon"></i>
                    <h3>Early Detection</h3>
                    <p>Identify potential COVID-19 cases before symptoms become severe with our advanced predictive model.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-thermometer-half feature-icon"></i>
                    <h3>Symptom Analysis</h3>
                    <p>Comprehensive evaluation of multiple symptoms for more accurate risk assessment.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-shield-alt feature-icon"></i>
                    <h3>Safety First</h3>
                    <p>Get preliminary assessment without immediate exposure to healthcare facilities.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-chart-line feature-icon"></i>
                    <h3>Real-time Updates</h3>
                    <p>Our system continuously learns from new data to improve accuracy over time.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Prediction Section -->
    <section class="prediction-section section" id="prediction">
        <div class="container">
            <div class="section-title">
                <h2>COVID-19 Symptom Checker</h2>
                <p>Select all symptoms that apply to you for accurate prediction</p>
            </div>
            
            <div class="prediction-intro">
                <p>Our advanced algorithm analyzes your symptoms against thousands of confirmed cases to provide a reliable risk assessment. Please select all symptoms you're currently experiencing for the most accurate prediction.</p>
            </div>
            
            <div class="image-grid">
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Breathing problem</h4>
                    <img src="{% static 'images/Breathing problem.jpg' %}" alt="Breathing problem">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Fever</h4>
                    <img src="{% static 'images/Fever.jpeg' %}" alt="Fever">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Dry cough</h4>
                    <img src="{% static 'images/Dry cough.webp' %}" alt="Dry cough">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Sore Throat</h4>
                    <img src="{% static 'images/Sore Throut.jpg' %}" alt="Sore Throat">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Runny Nose</h4>
                    <img src="{% static 'images/Runny Nose.webp' %}" alt="Runny Nose">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Asthma</h4>
                    <img src="{% static 'images/Asthma.jpg' %}" alt="Asthma">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Headache</h4>
                    <img src="{% static 'images/Headache.jpg' %}" alt="Headache">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Heart Diseases</h4>
                    <img src="{% static 'images/Heart Diseases.jpg' %}" alt="Heart Diseases">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Diabetes</h4>
                    <img src="{% static 'images/Diabetes.jpg' %}" alt="Diabetes">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Hypertension</h4>
                    <img src="{% static 'images/Hypertension.jpeg' %}" alt="Hypertension">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Fatigue</h4>
                    <img src="{% static 'images/Fatigue.jpg' %}" alt="Fatigue">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Abroad Travel</h4>
                    <img src="{% static 'images/Abroad Travel.jpg' %}" alt="Abroad Travel">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Attended Gathering</h4>
                    <img src="{% static 'images/attended gathering.jpg' %}" alt="Attended Gathering">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Visited Public Areas</h4>
                    <img src="{% static 'images/visited public areas.jpg' %}" alt="Visited Public Areas">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
                <div class="image-container" onclick="checkAuthAndToggleSelection(this)">
                    <h4>Family Working in Public</h4>
                    <img src="{% static 'images/Family working in public.webp' %}" alt="Family Working in Public">
                    <i class="fas fa-check-circle checkmark"></i>
                </div>
            </div>
            
            <div class="prediction-actions">
                <button class="btn btn-accent" onclick="checkAuthAndAnalyzeSymptoms()">
                    <i class="fas fa-chart-bar"></i> Analyze Symptoms
                </button>
            </div>
        </div>
    </section>
    
    <!-- How It Works Section -->
    <section class="detection-tool section" id="how-it-works">
        <div class="container">
            <div class="section-title">
                <h2>How Our Detection Works</h2>
                <p>Simple steps to get your COVID-19 risk assessment</p>
            </div>
            <div class="step-container">
                <div class="step">
                    <i class="fas fa-upload step-icon"></i>
                    <h3>Upload Information</h3>
                    <p>Provide your symptoms and any relevant medical history through our secure platform.</p>
                </div>
                <div class="step">
                    <i class="fas fa-brain step-icon"></i>
                    <h3>AI Analysis</h3>
                    <p>Our advanced machine learning model analyzes your data against thousands of cases.</p>
                </div>
                <div class="step">
                    <i class="fas fa-file-medical step-icon"></i>
                    <h3>Get Results</h3>
                    <p>Receive immediate, accurate risk assessment with recommendations.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- User Dashboard Section (Hidden by default) -->
    <section id="dashboardSection" class="section" style="display: none;">
        <div class="container">
            <div class="section-title">
                <h2>Your Health Dashboard</h2>
                <p>Track your COVID-19 risk and health metrics over time</p>
            </div>
            
            <div class="dashboard">
                <div class="health-timeline">
                    <h3>Your COVID Risk Over Time</h3>
                    <canvas id="healthTimelineChart"></canvas>
                    
                    <div class="viewer-container" id="xrayViewer">
                        <div class="viewer-controls">
                            <button onclick="rotateModel('left')"><i class="fas fa-undo"></i></button>
                            <button onclick="resetModel()"><i class="fas fa-sync-alt"></i></button>
                            <button onclick="rotateModel('right')"><i class="fas fa-redo"></i></button>
                        </div>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <button class="action-btn" onclick="openModal('uploadModal')">
                        <i class="fas fa-plus"></i> New Test
                    </button>
                    <button class="action-btn" onclick="showCommunityFeed()">
                        <i class="fas fa-users"></i> Community Support
                    </button>
                    <button class="action-btn" onclick="showVaccineInfo()">
                        <i class="fas fa-syringe"></i> Vaccine Info
                    </button>
                    <button class="action-btn" onclick="showTestingCenters()">
                        <i class="fas fa-clinic-medical"></i> Testing Centers
                    </button>
                </div>
            </div>
            
            <div class="gamification-panel">
                <div class="streak-counter">
                    <i class="fas fa-fire"></i> 7-day tracking streak
                </div>
                <div class="badges">
                    <div class="badge" title="Completed 5 tests">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="badge" title="Regular tracker">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="badge" title="Early detector">
                        <i class="fas fa-flag"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Community Feed Section (Hidden by default) -->
    <section id="communitySection" class="section" style="display: none;">
        <div class="container">
            <div class="section-title">
                <h2>Community Support</h2>
                <p>Connect with others and share experiences</p>
            </div>
            
            <div class="community-feed">
                <div class="post">
                    <p>"The symptom tracker helped me identify early signs and get tested in time. Very grateful!"</p>
                    <span class="meta">Anonymous, 3 days ago</span>
                </div>
                <div class="post">
                    <p>"The doctor's recommendations after my test were spot on. Recovered fully in 2 weeks."</p>
                    <span class="meta">Anonymous, 1 week ago</span>
                </div>
                <div class="post">
                    <p>"The daily symptom log feature helped me notice patterns I wouldn't have seen otherwise."</p>
                    <span class="meta">Anonymous, 2 weeks ago</span>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-accent" onclick="showDashboard()">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </div>
        </div>
    </section>
    
    <!-- Upload Modal -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('uploadModal')">×</span>
            <h2 class="modal-title">Patient Information</h2>
            <form class="patient-form" id="predictionForm">
                <div class="form-group">
                    <label for="patientName">Full Name</label>
                    <input type="text" id="patientName" placeholder="Enter your full name" required />
                </div>
                <div class="form-group">
                    <label for="patientAge">Age</label>
                    <input type="number" id="patientAge" placeholder="Enter your age" min="1" max="120" required />
                </div>
                <div class="form-group">
                    <label for="patientGender">Gender</label>
                    <select id="patientGender" required>
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                        <option value="prefer-not-to-say">Prefer not to say</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="xrayImage">Upload Chest X-ray (Optional)</label>
                    <div class="file-upload">
                        <div class="file-upload-btn">
                            <i class="fas fa-cloud-upload-alt"></i> Choose File
                        </div>
                        <input type="file" id="xrayImage" accept="image/*" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="patientNotes">Additional Notes</label>
                    <textarea id="patientNotes" rows="3" placeholder="Any other symptoms or relevant information"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-accent" onclick="startAnalysis()">
                        <i class="fas fa-play"></i> Start Analysis
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Sign In Modal -->
    <div id="signinModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('signinModal')">×</span>
            <h2 class="modal-title">Sign In</h2>
            <form class="auth-form" id="signinForm">
                <div class="form-group">
                    <label for="signinEmail">Email</label>
                    <input type="email" id="signinEmail" placeholder="Enter your email" required />
                </div>
                <div class="form-group">
                    <label for="signinPassword">Password</label>
                    <input type="password" id="signinPassword" placeholder="Enter your password" required />
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-accent" onclick="handleSignIn()">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                </div>
                <div class="auth-form-footer">
                    Don't have an account? <a href="#" onclick="switchToSignUp()">Sign up here</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Sign Up Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('signupModal')">×</span>
            <h2 class="modal-title">Create Account</h2>
            <form class="auth-form" id="signupForm">
                <div class="form-group">
                    <label for="signupFirstName">First Name</label>
                    <input type="text" id="signupFirstName" placeholder="Enter your first name" required />
                </div>
                <div class="form-group">
                    <label for="signupLastName">Last Name</label>
                    <input type="text" id="signupLastName" placeholder="Enter your last name" required />
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" placeholder="Enter your email" required />
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" placeholder="Create a password" required />
                </div>
                <div class="form-group">
                    <label for="signupPhoto">Profile Photo (Optional)</label>
                    <div class="file-upload">
                        <div class="file-upload-btn">
                            <i class="fas fa-camera"></i> Choose Photo
                        </div>
                        <input type="file" id="signupPhoto" accept="image/*" />
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-accent" onclick="handleSignUp()">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </div>
                <div class="auth-form-footer">
                    Already have an account? <a href="#" onclick="switchToSignIn()">Sign in here</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Report Section -->
    <section id="reportSection" class="report-section">
        <div class="container">
            <div class="section-title">
                <h2>Your COVID-19 Risk Assessment</h2>
                <p>Results based on your symptoms and information</p>
            </div>
            
            <div class="report-container">
                <div class="report-chart">
                    <h3>Risk Probability</h3>
                    <canvas id="resultChart"></canvas>
                </div>
                
                <div class="report-details">
                    <div class="patient-info">
                        <h3>Patient Information</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <strong>Name</strong>
                                <span id="reportName">-</span>
                            </div>
                            <div class="info-item">
                                <strong>Age</strong>
                                <span id="reportAge">-</span>
                            </div>
                            <div class="info-item">
                                <strong>Gender</strong>
                                <span id="reportGender">-</span>
                            </div>
                            <div class="info-item">
                                <strong>Analysis Date</strong>
                                <span id="reportDate">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="doctor-note">
                        <h3>Medical Assessment</h3>
                        <p id="doctorNote">Based on our analysis of your symptoms, you have a <strong>moderate risk</strong> of COVID-19 infection. We recommend self-isolation and contacting a healthcare provider for further evaluation and possible testing. Monitor your symptoms closely and seek immediate medical attention if you experience difficulty breathing, persistent chest pain, or confusion.</p>
                    </div>
                </div>
            </div>
            
            <div class="report-actions">
                <button class="btn btn-accent" onclick="downloadReport()">
                    <i class="fas fa-file-pdf"></i> Download Full Report
                </button>
                <button class="btn" onclick="printReport()" style="margin-left: 15px;">
                    <i class="fas fa-print"></i> Print Report
                </button>
                <button class="btn" onclick="showDashboard()" style="margin-left: 15px;">
                    <i class="fas fa-tachometer-alt"></i> View Dashboard
                </button>
            </div>
        </div>
    </section>
    
    <!-- Chatbot Toggle -->
    <div class="chatbot-toggle" onclick="toggleChatbot()">
        <i class="fas fa-robot"></i>
    </div>
    
    <!-- Chatbot Container -->
    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header">
            <h4>COVID Health Assistant</h4>
            <i class="fas fa-times" onclick="toggleChatbot()"></i>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message bot-message">
                Hello! I'm your COVID-19 health assistant. How can I help you today? Here are some options:
            </div>
            <div class="chat-message bot-message">
                <span class="chat-option" onclick="sendChatOption('How to use this portal?')">How to use this portal?</span>
                <span class="chat-option" onclick="sendChatOption('What features are available?')">What features are available?</span>
                <span class="chat-option" onclick="sendChatOption('How to get predictions?')">How to get predictions?</span>
                <span class="chat-clear" onclick="clearChat()">Clear Conversation</span>
            </div>
        </div>
        <div class="chat-input" style="display: none;">
            <input type="text" id="chatInput" placeholder="Ask about symptoms..." onkeypress="handleChatInput(event)">
            <button onclick="sendChatMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
    
    <!-- Accessibility Panel -->
    <div class="accessibility-panel" id="accessibilityPanel">
        <div class="accessibility-toggle" onclick="toggleAccessibilityPanel()">
            <i class="fas fa-universal-access"></i>
        </div>
        <h3>Accessibility</h3>
        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="highContrastToggle" onchange="toggleHighContrast()">
                High Contrast
            </label>
        </div>
        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="textSizeToggle" onchange="toggleTextSize()">
                Large Text
            </label>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>COVID Detection</h3>
                    <p>Advanced machine learning for early COVID-19 detection and risk assessment.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#prediction">Predictions</a></li>
                        <li><a href="#how-it-works">How It Works</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="#">COVID-19 Information</a></li>
                        <li><a href="#">Prevention Tips</a></li>
                        <li><a href="#">Testing Centers</a></li>
                        <li><a href="#">Vaccination Info</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact</h3>
                    <ul>
                        <li><i class="fas fa-envelope"></i> info@covid-detection.com</li>
                        <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Health St, Medical City</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 COVID Detection Portal. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
            </div>
        </div>
    </footer>
    
    <script>
        // Slideshow functionality
        let currentSlide = 0;
        const totalSlides = 3;
        
        function updateSlidePosition() {
            const container = document.getElementById("slideshowContainer");
            container.style.transform = `translateX(-${currentSlide * 33.33}%)`;
        }
        
        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateSlidePosition();
        }
        
        function prevSlide() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateSlidePosition();
        }
        
        // Auto-advance slides every 5 seconds
        const slideInterval = setInterval(nextSlide, 5000);
        
        // Pause slideshow when hovering over it
        const slideshow = document.querySelector('.slideshow');
        slideshow.addEventListener('mouseenter', () => clearInterval(slideInterval));
        slideshow.addEventListener('mouseleave', () => {
            clearInterval(slideInterval);
            slideInterval = setInterval(nextSlide, 5000);
        });
        
        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = "block";
            document.body.style.overflow = "hidden";
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
            document.body.style.overflow = "auto";
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains("modal")) {
                closeModal(event.target.id);
            }
            if (!event.target.matches(".profile-img") && !event.target.matches(".profile-name")) {
                const menu = document.getElementById("profileMenu");
                if (menu) menu.style.display = "none";
            }
        };
        
        // Mobile menu toggle
        function toggleMobileMenu() {
            const navLinks = document.getElementById("navLinks");
            navLinks.classList.toggle("active");
        }
        
        // Profile menu toggle
        function toggleProfileMenu() {
            const menu = document.getElementById("profileMenu");
            menu.style.display = menu.style.display === "block" ? "none" : "block";
        }
        
        // Toggle symptom selection
        function toggleSelection(container) {
            container.classList.toggle("selected");
        }
        
        // Check authentication before toggling selection
        function checkAuthAndToggleSelection(container) {
            {% if user.is_authenticated %}
                toggleSelection(container);
            {% else %}
                showAuthRequiredMessage();
            {% endif %}
        }
        
        // Check authentication before analyzing symptoms
        function checkAuthAndAnalyzeSymptoms() {
            {% if user.is_authenticated %}
                analyzeSymptoms();
            {% else %}
                showAuthRequiredMessage();
            {% endif %}
        }
        
        // Check authentication before opening modal
        function checkAuthAndOpenModal(modalId) {
            {% if user.is_authenticated %}
                openModal(modalId);
            {% else %}
                showAuthRequiredMessage();
            {% endif %}
        }
        
        // Show authentication required message
        function showAuthRequiredMessage() {
            alert("Please sign up or sign in to access this feature.");
            openModal('signupModal');
        }
        
        // Start analysis function
        function startAnalysis() {
            const name = document.getElementById("patientName").value;
            const age = document.getElementById("patientAge").value;
            const gender = document.getElementById("patientGender").value;
            
            if (!name || !age || !gender) {
                alert("Please fill in all required fields");
                return;
            }
            
            // Show loading state
            const submitBtn = document.querySelector('#uploadModal .btn-accent');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            submitBtn.disabled = true;
            
            // Simulate analysis (in a real app, this would be an API call)
            setTimeout(() => {
                closeModal("uploadModal");
                showReport(name, age, gender);
                
                // Reset button
                submitBtn.innerHTML = '<i class="fas fa-play"></i> Start Analysis';
                submitBtn.disabled = false;
            }, 3000);
        }
        
        // Analyze symptoms function
        function analyzeSymptoms() {
            const selectedSymptoms = document.querySelectorAll('.image-container.selected');
            
            if (selectedSymptoms.length === 0) {
                alert("Please select at least one symptom");
                return;
            }
            
            openModal('uploadModal');
        }
        
        // Show report function
        function showReport(name, age, gender) {
            // Update patient info
            document.getElementById("reportName").textContent = name;
            document.getElementById("reportAge").textContent = age;
            document.getElementById("reportGender").textContent = gender.charAt(0).toUpperCase() + gender.slice(1);
            
            // Set current date
            const now = new Date();
            document.getElementById("reportDate").textContent = now.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Generate random risk percentage (65-85% for demo)
            const riskPercent = Math.floor(Math.random() * 20) + 65;
            const normalPercent = 100 - riskPercent;
            
            // Create chart
            const ctx = document.getElementById("resultChart").getContext("2d");
            if (window.resultChart) {
                window.resultChart.destroy();
            }
            
            window.resultChart = new Chart(ctx, {
                type: "doughnut",
                data: {
                    labels: ["Normal", "COVID-19 Risk"],
                    datasets: [{
                        data: [normalPercent, riskPercent],
                        backgroundColor: ["#4CAF50", "#ff6b6b"],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    size: 14
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw}%`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
            
            // Update doctor's note based on risk level
            let note = "";
            if (riskPercent < 30) {
                note = `Based on our analysis of your symptoms, you have a <strong>low risk (${riskPercent}%)</strong> of COVID-19 infection. While your current symptoms don't strongly suggest COVID-19, we recommend monitoring your health and practicing preventive measures.`;
            } else if (riskPercent < 70) {
                note = `Based on our analysis of your symptoms, you have a <strong>moderate risk (${riskPercent}%)</strong> of COVID-19 infection. We recommend self-isolation and contacting a healthcare provider for further evaluation and possible testing.`;
            } else {
                note = `Based on our analysis of your symptoms, you have a <strong>high risk (${riskPercent}%)</strong> of COVID-19 infection. We strongly recommend immediate self-isolation, contacting a healthcare provider for testing, and monitoring your symptoms closely. Seek emergency care if you experience difficulty breathing.`;
            }
            
            document.getElementById("doctorNote").innerHTML = note;
            
            // Show report section
            document.getElementById("reportSection").style.display = "block";
            
            // Scroll to report
            setTimeout(() => {
                document.getElementById("reportSection").scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }
        
        // Download report
        function downloadReport() {
            alert("PDF report generation would be implemented here");
        }
        
        // Print report
        function printReport() {
            window.print();
        }
        
        // Logout function
        function handleLogout() {
            fetch('/auth/api/logout/', { method: 'GET' })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = data.redirect || '/auth/';
                } else {
                    alert("Logout failed: " + data.message);
                }
            })
            .catch(error => {
                console.error("Error during logout:", error);
                alert("An error occurred during logout.");
            });
        }
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Initialize with navbar scrolled if not at top
        if (window.scrollY > 50) {
            document.getElementById('navbar').classList.add('scrolled');
        }

        /* Authentication Functions */
        function switchToSignUp() {
            closeModal('signinModal');
            openModal('signupModal');
        }
        
        function switchToSignIn() {
            closeModal('signupModal');
            openModal('signinModal');
        }
        
        function handleSignIn() {
            const email = document.getElementById('signinEmail').value;
            const password = document.getElementById('signinPassword').value;
            
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            // In a real app, this would be an API call to your backend
            console.log('Signing in with:', email, password);
            
            // Simulate successful login
            setTimeout(() => {
                closeModal('signinModal');
                alert('Login successful!');
                // In a real app, you would redirect or update the UI based on the response
                // For demo purposes, we'll just reload the page
                window.location.reload();
            }, 1000);
        }
        
        function handleSignUp() {
            const firstName = document.getElementById('signupFirstName').value;
            const lastName = document.getElementById('signupLastName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const photoFile = document.getElementById('signupPhoto').files[0];
            
            if (!firstName || !lastName || !email || !password) {
                alert('Please fill in all required fields');
                return;
            }
            
            // In a real app, this would be an API call to your backend
            console.log('Signing up with:', {
                firstName,
                lastName,
                email,
                password,
                photo: photoFile ? photoFile.name : 'No photo'
            });
            
            // Simulate successful registration
            setTimeout(() => {
                closeModal('signupModal');
                alert('Registration successful! Please sign in.');
                openModal('signinModal');
            }, 1000);
        }

        /* Dashboard functionality */
        function showDashboard() {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('dashboardSection').style.display = 'block';
            
            // Initialize timeline chart
            initTimelineChart();
            
            // Initialize 3D viewer if X-ray was uploaded
            if (document.getElementById('xrayImage').files.length > 0) {
                init3DViewer();
            }
            
            // Load COVID stats
            fetchCovidData();
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function initTimelineChart() {
            const ctx = document.getElementById('healthTimelineChart').getContext('2d');
            const dates = [];
            const risks = [];
            
            // Generate sample data for the last 7 days
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                dates.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                risks.push(Math.floor(Math.random() * 30) + 40); // Random risk between 40-70%
            }
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'COVID Risk %',
                        data: risks,
                        borderColor: '#ff6b6b',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }
        
        // 3D Viewer functionality
        let scene, camera, renderer, model;
        
        function init3DViewer() {
            const container = document.getElementById('xrayViewer');
            
            // Clear previous viewer if exists
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }
            
            // Create canvas for Three.js
            const canvas = document.createElement('canvas');
            container.appendChild(canvas);
            
            // Setup Three.js scene
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            
            // Add lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(0, 1, 1);
            scene.add(directionalLight);
            
            // Create a simple lung model (in a real app, this would be loaded from a 3D model file)
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshPhongMaterial({ 
                color: 0xdddddd,
                transparent: true,
                opacity: 0.9,
                side: THREE.DoubleSide
            });
            model = new THREE.Mesh(geometry, material);
            scene.add(model);
            
            camera.position.z = 3;
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
            animate();
            
            // Add back the controls div
            const controlsDiv = document.createElement('div');
            controlsDiv.className = 'viewer-controls';
            controlsDiv.innerHTML = `
                <button onclick="rotateModel('left')"><i class="fas fa-undo"></i></button>
                <button onclick="resetModel()"><i class="fas fa-sync-alt"></i></button>
                <button onclick="rotateModel('right')"><i class="fas fa-redo"></i></button>
            `;
            container.appendChild(controlsDiv);
            
            // Handle window resize
            window.addEventListener('resize', () => {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            });
        }
        
        function rotateModel(direction) {
            if (!model) return;
            model.rotation.y += direction === 'left' ? -0.2 : 0.2;
        }
        
        function resetModel() {
            if (!model) return;
            model.rotation.set(0, 0, 0);
        }
        
        // Community feed functionality
        function showCommunityFeed() {
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('communitySection').style.display = 'block';
        }
        
        function showVaccineInfo() {
            alert("Vaccine information would be displayed here");
        }
        
        function showTestingCenters() {
            alert("Testing center locations would be displayed here");
        }
        
        // Chatbot functionality
        function toggleChatbot() {
            const chatbot = document.getElementById('chatbotContainer');
            chatbot.style.display = chatbot.style.display === 'flex' ? 'none' : 'flex';
            
            // Reset chat to initial state when opening
            if (chatbot.style.display === 'flex') {
                resetChat();
            }
        }
        
        function resetChat() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = `
                <div class="chat-message bot-message">
                    Hello! I'm your COVID-19 health assistant. How can I help you today? Here are some options:
                </div>
                <div class="chat-message bot-message">
                    <span class="chat-option" onclick="sendChatOption('How to use this portal?')">How to use this portal?</span>
                    <span class="chat-option" onclick="sendChatOption('What features are available?')">What features are available?</span>
                    <span class="chat-option" onclick="sendChatOption('How to get predictions?')">How to get predictions?</span>
                    <span class="chat-clear" onclick="clearChat()">Clear Conversation</span>
                </div>
            `;
        }
        
        function clearChat() {
            resetChat();
        }
        
        function sendChatOption(option) {
            const chatMessages = document.getElementById('chatMessages');
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'chat-message user-message';
            userMessage.textContent = option;
            chatMessages.appendChild(userMessage);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate bot response
            setTimeout(() => {
                let botResponse = "";
                let options = "";
                
                if (option === "How to use this portal?") {
                    botResponse = `
                        <p>To use this portal, follow these steps:</p>
                        <ol>
                            <li>Sign up for an account if you don't have one</li>
                            <li>Sign in to your account</li>
                            <li>Go to the Predictions section</li>
                            <li>Select your symptoms</li>
                            <li>Click "Analyze Symptoms"</li>
                            <li>Fill in your information and get your results</li>
                        </ol>
                    `;
                    options = `
                        <span class="chat-option" onclick="sendChatOption('Sign up now')">Sign up now</span>
                        <span class="chat-option" onclick="sendChatOption('Sign in now')">Sign in now</span>
                        <span class="chat-option" onclick="sendChatOption('What features are available?')">What features are available?</span>
                        <span class="chat-clear" onclick="clearChat()">Clear Conversation</span>
                    `;
                } 
                else if (option === "What features are available?") {
                    botResponse = `
                        <p>Our portal offers these features:</p>
                        <ul>
                            <li>COVID-19 symptom checker</li>
                            <li>Risk assessment based on your symptoms</li>
                            <li>Health dashboard to track your results</li>
                            <li>Community support</li>
                            <li>Vaccine information</li>
                        </ul>
                    `;
                    options = `
                        <span class="chat-option" onclick="sendChatOption('How to use this portal?')">How to use this portal?</span>
                        <span class="chat-option" onclick="sendChatOption('How to get predictions?')">How to get predictions?</span>
                        <span class="chat-clear" onclick="clearChat()">Clear Conversation</span>
                    `;
                }
                else if (option === "How to get predictions?") {
                    botResponse = `
                        <p>To get COVID-19 predictions:</p>
                        <ol>
                            <li>Select your symptoms from the list</li>
                            <li>Click "Analyze Symptoms"</li>
                            <li>Fill in your information</li>
                            <li>View your risk assessment</li>
                        </ol>
                    `;
                    options = `
                        <span class="chat-option" onclick="sendChatOption('How to use this portal?')">How to use this portal?</span>
                        <span class="chat-option" onclick="sendChatOption('Sign up now')">Sign up now</span>
                        <span class="chat-clear" onclick="clearChat()">Clear Conversation</span>
                    `;
                }
                else if (option === "Sign up now") {
                    botResponse = `
                        <p>Great! Let's get you signed up:</p>
                    `;
                    options = `
                        <button class="btn btn-accent" onclick="openModal('signupModal'); toggleChatbot();" style="width: 100%; margin: 10px 0;">
                            Open Sign Up Form
                        </button>
                        <span class="chat-option" onclick="sendChatOption('How to use this portal?')">Back to options</span>
                        <span class="chat-clear" onclick="clearChat()">Clear Conversation</span>
                    `;
                }
                else if (option === "Sign in now") {
                    botResponse = `
                        <p>Let's get you signed in:</p>
                    `;
                    options = `
                        <button class="btn btn-accent" onclick="openModal('signinModal'); toggleChatbot();" style="width: 100%; margin: 10px 0;">
                            Open Sign In Form
                        </button>
                        <span class="chat-option" onclick="sendChatOption('How to use this portal?')">Back to options</span>
                        <span class="chat-clear" onclick="clearChat()">Clear Conversation</span>
                    `;
                }
                else {
                    botResponse = "I'm here to help with COVID-19 related questions. Please select one of the options below.";
                    options = `
                        <span class="chat-option" onclick="sendChatOption('How to use this portal?')">How to use this portal?</span>
                        <span class="chat-option" onclick="sendChatOption('What features are available?')">What features are available?</span>
                        <span class="chat-option" onclick="sendChatOption('How to get predictions?')">How to get predictions?</span>
                        <span class="chat-clear" onclick="clearChat()">Clear Conversation</span>
                    `;
                }
                
                const botMessage = document.createElement('div');
                botMessage.className = 'chat-message bot-message';
                botMessage.innerHTML = botResponse;
                chatMessages.appendChild(botMessage);
                
                const optionsMessage = document.createElement('div');
                optionsMessage.className = 'chat-message bot-message';
                optionsMessage.innerHTML = options;
                chatMessages.appendChild(optionsMessage);
                
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 500);
        }
        
        // Accessibility features
        function toggleAccessibilityPanel() {
            const panel = document.getElementById('accessibilityPanel');
            panel.classList.toggle('open');
        }
        
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }
        
        function toggleTextSize() {
            document.body.classList.toggle('text-large');
        }
        
        // COVID data fetch
        async function fetchCovidData() {
            try {
                // In a real app, you would fetch from an actual API
                console.log("Fetching COVID data...");
                // Example: const response = await fetch('https://disease.sh/v3/covid-19/all');
                // const data = await response.json();
                // Update UI with real data
            } catch (error) {
                console.error("Error fetching COVID data:", error);
            }
        }
        
        // Initialize dashboard if coming from report
        if (window.location.hash === '#dashboard') {
            showDashboard();
        }
    </script>
</body>
</html>